#++ align_epi_anat version: 1.62
#Would be running:
  3dAttribute DELTA /opt/afni/src/tests/afni_ci_test_data/mini_data/small_epi+orig
#Would be running:
  3dAttribute DELTA /opt/afni/src/tests/afni_ci_test_data/mini_data/small_epi+orig
#Would be running:
  3dAttribute DELTA /opt/afni/src/tests/afni_ci_test_data/mini_data/anat_3mm_no_skull.nii.gz
#++ Multi-cost is lpc
#++ Removing all the temporary files
#Would be running:
  \rm -f ./__tt_small_epi*
#Would be running:
  \rm -f ./__tt_anat_3mm_no_skull*
#Would be running (command trimmed):
  3dcopy /opt/afni/src/tests/afni_ci_test_data/mini_data/anat_3mm_no_skull.nii.gz ./__tt_anat_3mm_no_skull+orig
#++ Removing skull from anat data
#Would be running (command trimmed):
  3dSkullStrip -orig_vol -input ./__tt_anat_3mm_no_skull+orig -prefix ./__tt_anat_3mm_no_skull_ns
#Would be running (command trimmed):
  3dinfo ./__tt_anat_3mm_no_skull_ns+orig | \grep 'Data Axes Tilt:'|\grep 'Oblique'
#Would be running (command trimmed):
  3dAttribute DELTA ./__tt_anat_3mm_no_skull_ns+orig
#++ Spacing for anat to oblique epi alignment is 1.234567
#++ Matching obliquity of anat to epi
#Would be running (command trimmed):
  3dWarp -verb -card2oblique /opt/afni/src/tests/afni_ci_test_data/mini_data/small_epi+orig -prefix ./__tt_anat_3mm_no_skull_ns_ob -newgrid 1.234567 ./__tt_anat_3mm_no_skull_ns+orig | \grep -A 4 '# mat44 Obliquity Transformation ::' > ./__tt_anat_3mm_no_skull_ns_obla2e_mat.1D
#Would be running:
  3dAttribute TAXIS_OFFSETS /opt/afni/src/tests/afni_ci_test_data/mini_data/small_epi+orig
#++ Correcting for slice timing
#Would be running (command trimmed):
  3dTshift -prefix ./__tt_small_epi_tsh -cubic /opt/afni/src/tests/afni_ci_test_data/mini_data/small_epi+orig 
#++ Creating representative epi sub-brick
#Would be running (command trimmed):
  3dbucket -prefix ./__tt_small_epi_tsh_ts ./__tt_small_epi_tsh+orig'[0]'
#++ removing skull or area outside brain
#Would be running (command trimmed):
  3dSkullStrip -orig_vol -input ./__tt_small_epi_tsh_ts+orig -prefix ./__tt_small_epi_tsh_ts_ns
#++ Computing weight mask
#Would be running (command trimmed):
  3dBrickStat -automask -percentile 90.000000 1 90.000000 ./__tt_small_epi_tsh_ts_ns+orig
#++ Would be applying threshold for real run here
#Would be running (command trimmed):
  3dcalc -datum float -prefix ./__tt_small_epi_tsh_ts_ns_wt -a ./__tt_small_epi_tsh_ts_ns+orig -expr 'min(1,(a/-999.000000))'
#++ Aligning anat data to epi data
#Would be running (command trimmed):
  3dAllineate -lpc -wtprefix ./__tt_anat_3mm_no_skull_ns_ob_aligned_wtal -weight ./__tt_small_epi_tsh_ts_ns_wt+orig -source ./__tt_anat_3mm_no_skull_ns_ob+orig -prefix ./__tt_anat_3mm_no_skull_ns_ob_temp_aligned -base ./__tt_small_epi_tsh_ts_ns+orig -cmass -1Dmatrix_save ./anat_3mm_no_skull_aligned_e2a_only_mat.aff12.1D -master BASE -mast_dxyz 1.234567 -weight_frac 1.0 -maxrot 6 -maxshf 10 -VERB -warp aff -source_automask+4 -twobest 11 -twopass -VERB -maxrot 45 -maxshf 40 -fineblur 1 -source_automask+2 
#Would be running (command trimmed):
  cat_matvec -ONELINE ./anat_3mm_no_skull_aligned_e2a_only_mat.aff12.1D ./__tt_anat_3mm_no_skull_ns_obla2e_mat.1D -I > ./anat_3mm_no_skull_aligned_mat.aff12.1D
#++ Combining anat to epi and oblique transformations
#Would be running (command trimmed):
  3dAllineate -base ./__tt_small_epi_tsh_ts_ns+orig -1Dmatrix_apply ./anat_3mm_no_skull_aligned_mat.aff12.1D -prefix ./anat_3mm_no_skull_aligned -input ./__tt_anat_3mm_no_skull_ns+orig -master BASE -mast_dxyz 1.234567 -weight_frac 1.0 -maxrot 6 -maxshf 10 -VERB -warp aff -source_automask+4 -twobest 11 -twopass -VERB -maxrot 45 -maxshf 40 -fineblur 1 -source_automask+2
#++ Creating final output: anat data aligned to epi
# copy is not necessary
#++ Saving history
#Would be running (command trimmed):
  3dNotes -h "align_epi_anat.py -anat \
 /opt/afni/src/tests/afni_ci_test_data/mini_data/anat_3mm_no_skull.nii.gz \
 -epi \
 /opt/afni/src/tests/afni_ci_test_data/mini_data/small_epi+orig.BRIK.gz \
 -epi_base 0 -suffix _aligned -ex_mode dry_run -giant_move" \
 ./anat_3mm_no_skull_aligned+orig

#++ Removing all the temporary files
#Would be running:
  \rm -f ./__tt_small_epi*
#Would be running:
  \rm -f ./__tt_anat_3mm_no_skull*

# Finished alignment successfully

